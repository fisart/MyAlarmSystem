{
    "elements": [
        { "type": "Label", "caption": "1. CLASS DEFINITIONS (Zones & Logic)" },
        {
            "type": "List", "name": "ClassList", "caption": "Classes", "rowCount": 5, "add": true, "delete": true,
            "columns": [
                { "caption": "ID", "name": "ClassID", "width": "0px", "add": "", "visible": false, "edit": { "type": "ValidationTextBox" } },
                { "caption": "Class Name", "name": "ClassName", "width": "200px", "add": "NewClass", "edit": { "type": "ValidationTextBox" } },
                { "caption": "Logic", "name": "LogicMode", "width": "100px", "add": 0, "edit": { "type": "Select", "options": [ { "caption": "OR (Instant)", "value": 0 }, { "caption": "AND (All)", "value": 1 }, { "caption": "COUNT", "value": 2 } ] } },
                { "caption": "Threshold", "name": "Threshold", "width": "80px", "add": 1, "edit": { "type": "NumberSpinner", "minimum": 1 } },
                { "caption": "Window", "name": "TimeWindow", "width": "80px", "add": 10, "edit": { "type": "NumberSpinner", "minimum": 1 } }
            ]
        },
        { "type": "Label", "caption": "2. SENSOR INPUTS (Mapped to Classes)" },
        {
            "type": "List", "name": "SensorList", "caption": "Mapped Sensors", "rowCount": 10, "add": true, "delete": true,
            "sort": { "column": "VariableID", "direction": "ascending" },
            "columns": [
                { "caption": "Variable", "name": "VariableID", "width": "250px", "add": 0, "edit": { "type": "SelectVariable" } },
                { "caption": "Op", "name": "Operator", "width": "70px", "add": 0, "edit": { "type": "Select", "options": [ { "caption": "=", "value": 0 }, { "caption": "!=", "value": 1 }, { "caption": ">", "value": 2 }, { "caption": "<", "value": 3 }, { "caption": ">=", "value": 4 }, { "caption": "<=", "value": 5 } ] } },
                { "caption": "Value", "name": "ComparisonValue", "width": "80px", "add": "1", "edit": { "type": "ValidationTextBox" } },
                { "caption": "Assigned Class", "name": "ClassID", "width": "200px", "add": "", "edit": { "type": "Select", "options": [] } }
            ]
        },
        { "type": "Label", "caption": "3. GROUP DEFINITIONS (Output Container)" },
        {
            "type": "List", "name": "GroupList", "caption": "Step A: Create Groups", "rowCount": 3, "add": true, "delete": true,
            "columns": [
                { "caption": "Group Name", "name": "GroupName", "width": "300px", "add": "AlarmGroup", "edit": { "type": "ValidationTextBox" } },
                { "caption": "Logic", "name": "GroupLogic", "width": "150px", "add": 0, "edit": { "type": "Select", "options": [ { "caption": "OR (Any Member)", "value": 0 }, { "caption": "AND (All Members)", "value": 1 } ] } }
            ]
        },
        {
            "type": "List", "name": "GroupMembers", "caption": "Step B: Assign Classes to Groups", "rowCount": 5, "add": true, "delete": true,
            "columns": [
                { "caption": "Select Group", "name": "GroupName", "width": "250px", "add": "", "edit": { "type": "Select", "options": [] } },
                { "caption": "Select Class", "name": "ClassID", "width": "250px", "add": "", "edit": { "type": "Select", "options": [] } }
            ]
        },
        { "type": "ExpansionPanel", "caption": "Sabotage / Tamper", "items": [
                { "type": "List", "name": "TamperList", "caption": "Tamper Sensors", "add": true, "delete": true, "columns": [ { "caption": "Variable", "name": "VariableID", "width": "400px", "add": 0, "edit": { "type": "SelectVariable" } }, { "caption": "Invert", "name": "Invert", "width": "100px", "add": false, "edit": { "type": "CheckBox" } } ] }
            ]
        },
        { "type": "CheckBox", "name": "MaintenanceMode", "caption": "Maintenance Mode" }
    ],
    "actions": [
        { "type": "ExpansionPanel", "caption": "BULK IMPORT WIZARD", "items": [
                { "type": "Label", "caption": "Scan for sensors and assign them to a Class defined above." },
                { "type": "SelectObject", "name": "ImportRootID", "caption": "Search Root" },
                { "type": "Select", "name": "ImportClass", "caption": "Assign to Class", "options": [] },
                { "type": "Button", "caption": "SCAN", "onClick": "MYALARM_UI_Scan($id, $ImportRootID);" },
                { "type": "Label", "caption": "Filter Results:" },
                { 
                    "type": "RowLayout",
                    "items": [
                        { "type": "ValidationTextBox", "name": "WizardFilterText", "caption": "Search Name..." },
                        { "type": "Button", "caption": "Filter", "onClick": "IPS_RequestAction($id, 'FilterWizard', $WizardFilterText);" }
                    ]
                },
                {
                    "type": "List", "name": "ImportCandidates", "caption": "Found Variables", "visible": false, "rowCount": 8,
                    "onEdit": "IPS_RequestAction($id, 'UpdateWizardList', json_encode($ImportCandidates));",
                    "columns": [
                        { "caption": "ID", "name": "VariableID", "width": "70px", "edit": { "type": "Label" } },
                        { "caption": "Name", "name": "Name", "width": "300px", "edit": { "type": "Label" } },
                        { "caption": "Import", "name": "Selected", "width": "50px", "edit": { "type": "CheckBox" } }
                    ],
                    "values": []
                },
                {
                    "type": "RowLayout",
                    "items": [
                        { "type": "Button", "caption": "Select All", "onClick": "MYALARM_UI_SelectAll($id);" },
                        { "type": "Button", "caption": "Select None", "onClick": "MYALARM_UI_SelectNone($id);" },
                        { "type": "Button", "caption": "ADD SELECTED", "onClick": "MYALARM_UI_Import($id, $ImportCandidates, $ImportClass);" }
                    ]
                }
            ]
        }
    ]
}