{
    "elements": [
        { "type": "Label", "caption": "1. CLASS DEFINITIONS (Zones & Logic)" },
        {
            "type": "List", "name": "ClassList", "caption": "Classes", "rowCount": 5, "add": true, "delete": true,
            "columns": [
                { "caption": "ID", "name": "ClassID", "width": "0px", "add": "", "visible": false },
                { "caption": "Class Name", "name": "ClassName", "width": "200px", "add": "NewClass", "edit": { "type": "ValidationTextBox" } },
                { 
                    "caption": "Label Mode", "name": "LabelMode", "width": "200px", "add": 0, 
                    "edit": { "type": "Select", "options": [ { "caption": "Sensor Name", "value": 0 }, { "caption": "Parent (Location)", "value": 1 }, { "caption": "Status Text", "value": 2 } ] } 
                },
                { "caption": "Logic", "name": "LogicMode", "width": "200px", "add": 0, "edit": { "type": "Select", "options": [ { "caption": "OR (Instant)", "value": 0 }, { "caption": "AND (All)", "value": 1 }, { "caption": "COUNT", "value": 2 } ] } },
                { "caption": "Threshold", "name": "Threshold", "width": "100px", "add": 1, "edit": { "type": "NumberSpinner", "minimum": 1 } },
                { "caption": "Window", "name": "TimeWindow", "width": "100px", "add": 10, "edit": { "type": "NumberSpinner", "minimum": 1 } }
            ]
        },
        { "type": "Label", "caption": "2. SENSOR INPUTS (Grouped by Class)" },
        { "type": "ExpansionPanel", "name": "DynamicSensorContainer", "caption": "Manage sensors within their classes", "items": [] },
        { "type": "ExpansionPanel", "caption": "Sabotage / Tamper", "items": [
                { "type": "List", "name": "TamperList", "caption": "Tamper Sensors", "add": true, "delete": true, "columns": [ { "caption": "Variable", "name": "VariableID", "width": "200px", "add": 0, "edit": { "type": "SelectVariable" } }, { "caption": "Invert", "name": "Invert", "width": "100px", "add": false, "edit": { "type": "CheckBox" } } ] }
            ]
        },
        { "type": "CheckBox", "name": "MaintenanceMode", "caption": "Maintenance Mode" }
    ],
    "actions": [
        {
  "type": "Button",
  "caption": "COMMIT ALL CHANGES TO DISK",
  "onClick": "IPS_RequestAction($id, 'UpdateGroupList', json_encode($List_Groups)); MYALARM_SaveConfiguration($id);"
}
,
        { "type": "Label", "caption": "3. GROUP MANAGEMENT (Stateless)" },
        { "type": "ExpansionPanel", "name": "DynamicGroupContainer", "caption": "Step 3a: Create and Edit Groups", "items": [] },
        { "type": "ExpansionPanel", "name": "DynamicBedroomContainer", "caption": "Step 3b: Bedroom Behavioral Settings", "items": [] },
        { "type": "ExpansionPanel", "name": "DynamicGroupMemberContainer", "caption": "Step B: Assign Classes to Groups", "items": [] },
        { "type": "ExpansionPanel", "caption": "BULK IMPORT WIZARD", "items": [
                { "type": "Label", "caption": "Scan for sensors and assign them to a Class defined above." },
                { "type": "SelectObject", "name": "ImportRootID", "caption": "Search Root" },
                { "type": "Select", "name": "ImportClass", "caption": "Assign to Class", "options": [] },
                { "type": "Button", "caption": "SCAN", "onClick": "MYALARM_UI_Scan($id, $ImportRootID);" },
                { "type": "Label", "caption": "Filter Results:" },
                { 
                    "type": "RowLayout",
                    "items": [
                        { "type": "ValidationTextBox", "name": "WizardFilterText", "caption": "Search Name..." },
                        { "type": "Button", "caption": "Filter", "onClick": "IPS_RequestAction($id, 'FilterWizard', $WizardFilterText);" }
                    ]
                },
                {
                    "type": "List", "name": "ImportCandidates", "caption": "Found Variables", "visible": false, "rowCount": 8,
                    "onEdit": "IPS_RequestAction($id, 'UpdateWizardList', json_encode($ImportCandidates));",
                    "columns": [
                        { "caption": "ID", "name": "VariableID", "width": "70px", "edit": { "type": "Label" } },
                        { "caption": "Name", "name": "Name", "width": "300px", "edit": { "type": "Label" } },
                        { "caption": "Import", "name": "Selected", "width": "50px", "edit": { "type": "CheckBox" } }
                    ],
                    "values": []
                },
                {
                    "type": "RowLayout",
                    "items": [
                        { "type": "Button", "caption": "Select All", "onClick": "MYALARM_UI_SelectAll($id);" },
                        { "type": "Button", "caption": "Select None", "onClick": "MYALARM_UI_SelectNone($id);" },
                        { "type": "Button", "caption": "ADD SELECTED", "onClick": "MYALARM_UI_Import($id, $ImportClass);" }
                    ]
                }
            ]
        },
        { "type": "ExpansionPanel", "caption": "CONFIGURATION BACKUP / RESTORE", "items": [
            { "type": "Label", "caption": "1. Click 'LOAD' to generate JSON. 2. Copy/Paste to file. 3. To Restore: Paste JSON and click 'RESTORE'." },
            { "type": "ValidationTextBox", "name": "BackupData", "caption": "JSON Data" },
            {
                "type": "RowLayout",
                "items": [
                    { "type": "Button", "caption": "LOAD CURRENT CONFIG", "onClick": "MYALARM_UI_LoadBackup($id);" },
                    { "type": "Button", "caption": "RESTORE FROM JSON", "onClick": "MYALARM_UI_RestoreBackup($id, $BackupData);" }
                ]
            }
        ]}
    ]
}